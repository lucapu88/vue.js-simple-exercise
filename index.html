<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head> 
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="img/favicon.png" />
    <title>Lista Spesa</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"> <!-- bootstrap -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"> <!-- fontawesome -->
    <link rel="stylesheet" href="style.css"> <!-- css -->
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet"> <!-- google body font -->
    <link href="https://fonts.googleapis.com/css2?family=Oleo+Script:wght@700&display=swap" rel="stylesheet"> <!-- google other font -->
    <link href="https://fonts.googleapis.com/css2?family=Chango&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> <!-- vue -->
  </head>
  <body> <!-- PS.: la vista è stata curata solo per la visualizzazione in versione mobile-->
    <div class="container">
      <div id="app">
        <div class="row">
          <div class="mt-3 mx-auto">
            <!-- HEADER -->
            <img v-if="christmasTheme" 
              class="christmas-theme" 
              src="./img/ghirlanda.png" 
              alt="merry-christmas">
            <div class="header-container" :class="{'christmas': christmasTheme}">
              <h2 class="title text-center">Lista Spesa</h2>
              <h2 class="title2 text-center">Lista Spesa</h2>
              <span class="helper" @click="showHelper()">?</span>
              <button class="btn btn-outline-success" @click="copy(list)">
                <i class="far fa-copy"></i></br>
              </button> 
              <input 
                class="inputText mb-2 border border-primary rounded"
                :class="{'placeholder-selected': this.placeholder != defaultPlaceholderText}" 
                ref="myInput" 
                v-model="newTodo" 
                @keypress.13='addTodo' 
                :placeholder="this.placeholder">  <!--INPUT AGGIUNGI-->
              <button class="btn btn-info" @click="addTodo">
                <i class="far fa-paper-plane"></i>
              </button> 
              <button class="btn custom-show-listbtn" @click="showList()">
                <span v-if="!categoryList">+</span>
                <span v-else>-</span>
              </button> 
            </div>
            <!-- HELPER -->
            <div class="helper-description" 
              :class="{
                'slideUp' : helper === true, 
                'slideDown': helper === false
              }" >
              <p class="close-helper" @click="showHelper()">X</p>
              <img v-if="christmasTheme" class="left-christmas-info" src="./img/Gingerman-icon.png" alt="Buon Natale!">
              <p class="helper-title">Serve aiuto?</p>
              <img v-if="christmasTheme" class="right-christmas-info" src="./img/Decorations-icon.png" alt="E felice anno nuovo!">
              <div id="helper-description">
                <span>- <i class="far fa-paper-plane btn btn-info helper-icon"></i> serve per aggiungere alla lista roba da comprare.</span></br>
                <span>- Con <i class="fas fa-pencil-alt btn-primary rounded-circle btn-sm helper-icon"></i> potrai modificare un nome e salvare le modifiche cliccando <i class="far fa-save btn btn-success rounded-circle btn-sm helper-icon"></i>.</span></br>
                <span>- Con <i class="fas fa-trash-alt btn-primary rounded-circle btn-sm helper-icon"></i> eliminerai roba dalla lista.</span></br>
                <span>- <span class="custom-show-listbtn helper-icon">+</span> serve per visualizzare l'indice delle categorie selezionabili.</span></br>
                <span>- Per scegliere una categoria basta scriverla e cliccare <i class="far fa-paper-plane btn btn-info helper-icon"></i>. Ti apparirà <span class="category">evidenziata</span> nella lista. </br>Una volta creata la categoria, basterà cliccare sul nome di essa, e verrà evidenziata <span class="selected">così </span>, li sotto aggiungerai roba che scriverai. Per annullare l'operazione basta cliccare su qualsiasi categoria nel <span class="category">riquadro verde</span> già esistente.</span></br>
                 <span>-<i class="far fa-copy btn btn-outline-success helper-icon"></i> serve per copiare la lista e incollarla dove vuoi.</span></br>
                <span>- Puoi "bloccare" un prodotto cliccandoci sopra, e ti verrà evidenziato <span class="active">così </span>. Non potrà essere eliminato. Potrebbe tornarti utile, ad esempio, quando non lo trovi al supermercato e non vuoi eliminarlo dalla lista.</span></br>
                <span>- Se clicchi su <span class="delete-all-description">cancella tutto <i class="fas fa-skull-crossbones"></i></span> ti apparirà un riquadro di conferma per l'eliminazione di <u>TUTTA</u> la lista.</span></br>
                <span>- Se non hai capito un &#x1f51e; di tutto ciò, non preoccuparti, c'è un video tutorial <a href="https://www.youtube.com/watch?v=VSO1k1CUrBY" target="_blank">cliccando qui</a>. </span>
              </div>
            </div>
            <!-- CATEGORY -->
            <div v-if="categoryList" class="category-list-container">
              <p class="m-0">Indice categorie:</p>
              <span class="category-list-description">Scrivi uno di questi nomi e ti verrà creata una categoria</span></br>  
              <span class="category-list" v-for="(category, i) in categories" :key="i">{{category.name}}, </span>
            </div>
            <p class="list-copied" v-if="copyList.visible === true">{{copyList.text}}</p>
            <!-- TODO LIST -->
            <ul class="col-12" :class="{'christmas': christmasTheme}">
              <div v-for="(todo, n) in todos" :class="{'category': todo.class}">
                <div v-if="todo.class" 
                  class="category-emoji"
                  :class="{'category-emoji-selected': todo.isSelected}">
                    {{todo.emojy}}
                </div>
                <i v-else class="fas fa-cart-arrow-down mr-1 ml-2"></i>
                <li 
                  class="mt-2 todo" 
                  @click="myFilter(n); 
                    selectCategoryToAddItem(n, todo)" 
                  :class="{'active': todo.isActive, 
                    'selected': todo.isSelected}"> 
                  {{ todo.name }} 
                </li>
                <li class="button-container bg-light" :class="todo.class ? 'categoryActive' : ''"> 
                  <button 
                    class="ml-1 btn btn-primary rounded-circle btn-sm" 
                    @click="toggleHidden(n)" v-if="todo.isHidden == true && !todo.class" 
                    :class="todo.isDisabled ? 'disabled' : '' " 
                    :disabled="!!todo.isDisabled">
                    <i class="fas fa-pencil-alt"></i>
                  </button> <!-- MODIFICA-->
                  <button 
                    class="ml-1 btn btn-primary rounded-circle btn-sm" 
                    v-if="todo.isHidden == true" @click="removeTodo(n)" 
                    :class="todo.isDisabled ? 'disabled' : '' " 
                    :disabled="!!todo.isDisabled">
                    <i class="fas fa-trash-alt"></i>
                  </button> <!--ELIMINA -->
                  <i class="fas fa-shopping-cart ml-2 text-info" v-if="todo.isHidden == false"></i>
                  <input 
                    class="modify-input ml-2 border border-primary rounded" 
                    v-if="todo.isHidden == false" 
                    v-model="todo.name"> <!-- INPUT MODIFICA -->
                  <button 
                    class="ml-1 btn btn-success rounded-circle btn-sm" 
                    @click="toggleHidden(n)" 
                    v-if="todo.isHidden ==false" 
                    v-on:click="modifyTodo(n, todo, todo.name)">
                    <i class="far fa-save"></i>
                  </button> <!-- SALVA -->
                </li>
              </div>
            </ul>
            <!-- DELETE ALL -->
            <div 
              class="confirm col-10 mx-auto rounded bg-white text-center mb-3" 
              :class="{'christmas': christmasTheme}" 
              v-if="!visible">  
              <p>
                <i class="fas fa-shopping-cart text-danger"></i> 
                Sei sicuro di voler eliminare tutta la lista?
              </p> 
              <button class="btn btn-primary" v-on:click="visible = true" @click="removeAllTodo()">
                SI
              </button> 
              <button class="btn btn-secondary" v-on:click="visible = true">
                NO
              </button> 
            </div>

            <button class="delete-all btn btn-dark" :class="{'christmas': christmasTheme}" v-on:click="visible = !visible">
              Cancella tutto 
              <i class="fas fa-skull-crossbones"></i>
            </button> 
            
            <img v-if="christmasTheme" class="christas-footer" src="./img/christmas.png" alt="">
            <small class="created-by-luca-caputo">By Luca Caputo</small>
          </div>
        </div>
      </div>
    </div>
    <script src="main.js" charset="utf-8"></script>
  </body>
</html>
